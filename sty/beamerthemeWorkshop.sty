%
% ROSEdu Summer Workshops
%
% Based on OSSS, based itself on CDL.
%
% This file may be distributed and/or modified under the GNU General Public License.
%

\ProvidesPackage{beamerthemeWorkshop}[2010/01/28]

\RequirePackage{tikz}
\RequirePackage{graphics}

\mode<presentation>

\useoutertheme{default}
\usecolortheme{wolverine}
\useinnertheme{rounded}

\setbeamertemplate{blocks}[rounded][shadow=true]

\setbeamerfont{block title}{size={}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Local defs
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\def\workshop@frametitle{picture-section}
\def\workshop@imagenametitle{workshop-logo}
\def\workshop@titlepage{picture}
\define@key{workshop}{headline}[none]{
  \def\workshop@headline{#1}
}
\define@key{workshop}{frametitle}[picture]{
  \def\workshop@frametitle{#1}
}
\define@key{workshop}{imagenametitle}{
  \def\workshop@imagename{#1}
  \pgfdeclareimage[width=0.12\textwidth,interpolate=true]{headlineimage}{\workshop@imagenametitle}
}
\define@key{workshop}{titlepage}[picture]{
  \def\workshop@titlepage{#1}
}

\def\workshopoptions#1{\setkeys{workshop}{#1}}

% Title page

\defbeamertemplate*{title page}{workshop theme}{
  \edef\tempa{picture}
  \ifx\workshop@titlepage\tempa
    \vfill
    \parbox{0.28\textwidth}{
      \pgfimage[width=0.27\textwidth]{\workshop@imagenametitle}
    }\hfill
  \parbox{0.7\textwidth}{
    \begin{center}
    {\usebeamerfont{title}\usebeamercolor{title}{\color{fg}\inserttitle}}
    \ifx\insertsubtitle\@empty\\[\baselineskip]
      \else{\\\usebeamerfont{subtitle}\usebeamercolor{subtitle}{\color{fg}\insertsubtitle}}\\[\baselineskip]\fi
      \hrule\vskip\baselineskip
      \ifx\insertauthor\@empty\ \\
      \else{\usebeamerfont{author}\usebeamercolor{author}{\color{fg}\insertauthor}}\\\fi
      \ifx\insertdate\@empty\ \\
      \else{\usebeamerfont{date}\usebeamercolor{date}{\color{fg}\insertdate}}\\\fi
      \ifx\insertinstitute\@empty
      \else{\usebeamerfont{institute}\usebeamercolor{institute}{\color{fg}\insertinstitute}}\\\fi
      \insertlogo
      \end{center}
  }\vfill
  \else
    \pgfdeclarehorizontalshading{separationtitlepagelineshading}{0.5pt}{color(0cm)=(bg);
      color(0.5\textwidth)=(structure.fg); color(\textwidth)=(bg)}
      \begin{center}
      \vfill
      {\usebeamerfont{title}\usebeamercolor{title}{\color{fg}\inserttitle}}

      \ifx\insertsubtitle\@empty
        \else{\usebeamerfont{subtitle}\usebeamercolor{subtitle}{\color{fg}\insertsubtitle}}\\[\baselineskip]\fi

        \pgfuseshading{separationtitlepagelineshading}
      \ifx\insertauthor\@empty\ \\
        \else{\usebeamerfont{author}\usebeamercolor{author}{\color{fg}\insertauthor}}\\\fi
        \ifx\insertdate\@empty\ \\
        \else{\usebeamerfont{date}\usebeamercolor{date}{\color{fg}\insertdate}}\\\fi
        \ifx\insertinstitute\@empty
        \else{\usebeamerfont{institute}\usebeamercolor{institute}{\color{fg}\insertinstitute}}\\\fi
        \insertlogo
        \pgfuseshading{separationtitlepagelineshading}
      \vfill
        \end{center}
      \fi
}

\setbeamertemplate{title page}[workshop theme]

% End: print authors and name

\defbeamertemplate*{footline}{workshop theme}
{
  \leavevmode%
  \hbox{%
  \begin{beamercolorbox}[wd=.5\paperwidth,ht=2.25ex,dp=1ex,left]{author}%
    \usebeamerfont{author}\insertshortauthor~~(\insertshortinstitute)
  \end{beamercolorbox}%
  \begin{beamercolorbox}[wd=.5\paperwidth,ht=2.25ex,dp=1ex,right]{title}%
    \usebeamerfont{title}\insertshorttitle
  \end{beamercolorbox}}%
  \vskip0pt%
}
\setbeamertemplate{navigation symbols}{}
\setbeamersize{text margin left=1em,text margin right=2em}
\mode
<all>
